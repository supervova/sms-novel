/*! 2015-12-09 */
"use strict";function dropDowns(){var a=$(".mm-label-4dd, .body-label-4dd, .hdr-label-4dd"),b=$(".mm-dropdown, .body-dropdown, .hdr-dropdown");a.click(function(c){return b.hide(),$(this).parents(".mm-menu, .body-menu, .hdr-menu").children(".mm-dropdown, .body-dropdown, .hdr-dropdown").toggle(),a.removeClass("down"),$(this).addClass("down"),!1}),$(document).click(function(){b.hide(),a.removeClass("down")}),$(document).keydown(function(c){27==c.keyCode&&(b.hide(),a.removeClass("down"))}),b.click(function(a){a.stopPropagation()})}function slideOut(){var a;$(".btn-menu").click(function(){return a!==!0?($(".page, .doc-header").animate({marginLeft:"240px"},300,function(){a=!0}),"visible"!=$("#slide-out").css("visibility")&&$("#slide-out").css("visibility","visible"),!1):($(".page, .doc-header").animate({marginLeft:"0"},300,function(){a=!1}),!1)}),$("#slide-out li a").click(function(){var a=$(this).parent();$(a).hasClass("current")?$("#slide-out li").removeClass("current"):($("#slide-out li").removeClass("current"),$(a).addClass("current"))})}function tooltip(){window.matchMedia("(min-width: 769px)").matches&&$(".dfn").hover(function(){var a=$(this).prop("title");$(this).after('<p class="tooltip">'+a+"</p>"),$(this).siblings(".tooltip").show("fast"),$(this).data("title",$(this).prop("title")),$(this).removeAttr("title")},function(){$(".tooltip").hide("fast").remove(),$(this).prop("title",$(this).data("title")),$(".box-cta hr").css("background-position","0 0")})}function smiley(){window.matchMedia("(min-width: 769px)").matches&&$(".dfn, .h-buy-secondary a").hover(function(){$(".box-cta hr").css("background-position","0 -48px")})}function tumblrLike(){$(".pft-like").click(function(){var a=$(this).hasClass("pft-liked")?"unlike":"like",b=$(this).attr("data-reblog").slice(-8),c=$(this).attr("data-id"),d="http://www.tumblr.com/"+a+"/"+b+"?id="+c;return $("#likeit").attr("src",d),$(this).hasClass("pft-liked")?$(this).removeClass("pft-liked"):$(this).addClass("pft-liked"),!1})}function noError(){return!0}!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){c(1),window.Origami={fastclick:c(2),"o-autoinit":c(4)}},function(a,b){a.exports={name:"__MAIN__",dependencies:{fastclick:"fastclick#*","o-autoinit":"o-autoinit#^1.0.0"}}},function(a,b,c){a.exports=c(3)},function(a,b){var c=!1;!function(){function b(a,c){function d(a,b){return function(){return a.apply(b,arguments)}}var f;if(c=c||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=c.touchBoundary||10,this.layer=a,this.tapDelay=c.tapDelay||200,this.tapTimeout=c.tapTimeout||700,!b.notNeeded(a)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=d(h[g[i]],h);e&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(f=a.onclick,a.addEventListener("click",function(a){f(a)},!1),a.onclick=null)}}var d=navigator.userAgent.indexOf("Windows Phone")>=0,e=navigator.userAgent.indexOf("Android")>0&&!d,f=/iP(ad|hone|od)/.test(navigator.userAgent)&&!d,g=f&&/OS 4_\d(_\d)?/.test(navigator.userAgent),h=f&&/OS [6-7]_\d/.test(navigator.userAgent),i=navigator.userAgent.indexOf("BB10")>0;b.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(f&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},b.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!e;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},b.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},b.prototype.determineEventType=function(a){return e&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},b.prototype.focus=function(a){var b;f&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},b.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},b.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},b.prototype.onTouchStart=function(a){var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],f){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!g){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},b.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},b.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},b.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},b.prototype.onTouchEnd=function(a){var b,c,d,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,h&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=k.tagName.toLowerCase(),"label"===d){if(b=this.findControl(k)){if(this.focus(k),e)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-c>100||f&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),f&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return f&&!g&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},b.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},b.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:!a.cancelable||this.needsClick(this.targetElement)&&!this.cancelNextClick?!0:(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0},b.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},b.prototype.destroy=function(){var a=this.layer;e&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},b.notNeeded=function(a){var b,c,d,f;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!e)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(i&&(d=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),d[1]>=10&&d[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},b.attach=function(a,c){return new b(a,c)},"function"==typeof c&&"object"==typeof c.amd&&c.amd?c(function(){return b}):"undefined"!=typeof a&&a.exports?(a.exports=b.attach,a.exports.FastClick=b):window.FastClick=b}()},function(a,b,c){a.exports=c(5)},function(a,b){function c(a){a in d||(d[a]=!0,document.dispatchEvent(new CustomEvent("o."+a)))}var d={};if(window.addEventListener("load",c.bind(null,"load")),window.addEventListener("load",c.bind(null,"DOMContentLoaded")),document.addEventListener("DOMContentLoaded",c.bind(null,"DOMContentLoaded")),document.onreadystatechange=function(){"complete"===document.readyState?(c("DOMContentLoaded"),c("load")):"interactive"!==document.readyState||document.attachEvent||c("DOMContentLoaded")},"complete"===document.readyState?(c("DOMContentLoaded"),c("load")):"interactive"!==document.readyState||document.attachEvent||c("DOMContentLoaded"),document.attachEvent){var e=!1,f=50;try{e=null==window.frameElement&&document.documentElement}catch(g){}e&&e.doScroll&&!function h(){if(!("DOMContentLoaded"in d)){try{e.doScroll("left")}catch(a){return 5e3>f?setTimeout(h,f*=1.2):void 0}c("DOMContentLoaded")}}()}}]),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var a=document.createElement("style");a.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(a)}}(),function(a){a.fn.extend({rotaterator:function(b){var c={fadeSpeed:600,pauseSpeed:100,child:null},b=a.extend(c,b);return this.each(function(){var c=b,d=a(this),e=a(d.children(),d);if(e.each(function(){a(this).hide()}),c.child)var f=c.child;else var f=a(d).children(":first");a(f).fadeIn(c.fadeSpeed,function(){a(f).delay(c.pauseSpeed).fadeOut(c.fadeSpeed,function(){var b=a(this).next();0===b.length&&(b=a(d).children(":first")),a(d).rotaterator({child:b,fadeSpeed:c.fadeSpeed,pauseSpeed:c.pauseSpeed})})})})}})}(jQuery),$(function(){$('iframe[src^="http://player.vimeo.com"], iframe[src^="http://www.youtube.com"], iframe[src*="dailymotion.com"], iframe[src*="//instagram.com/"], iframe[src^="http://coub.com"], object:not([class*="not-video"]):not(:has(embed)), embed:not([class*="not-video"])').wrap('<figure class="video" />'),$("ol, ul").prev("p").css("margin-bottom","0"),dropDowns(),tooltip(),smiley(),slideOut(),tumblrLike(),$(".box-testimonials").rotaterator({fadeSpeed:1200,pauseSpeed:8e3}),$('<div class="box-cta-hr"></div>').insertBefore(".box-cta .h-secondary"),$(".btn-back").click(function(){return parent.history.back(),!1}),$(".l-paid .ico-epub").on("click",function(){ga("send","event","Download","EPUB")}),$(".l-paid .ico-mobi").on("click",function(){ga("send","event","Download","MOBI")}),$(".l-paid .ico-ipad").on("click",function(){ga("send","event","Download","IPAD")}),$(".l-paid .ico-pdf").on("click",function(){ga("send","event","Download","PDF")}),$(".l-free .a-download-txt").on("click",function(){ga("send","event","Download","TXT")}),$(".l-free .a-download-ipad").on("click",function(){ga("send","event","Download","iPad")}),$(".p-winter-2016 .mm-download, .p-winter-2016 .btn-sec").on("click",function(){ga("send","event","LP Secondary","Download")}),$(".p-winter-2016 .mm-buy, .p-winter-2016 .btn-prim").on("click",function(){ga("send","event","LP Primary","Buy")}),FastClick.attach(document.body)}),window.onerror=noError;